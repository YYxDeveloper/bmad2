# é„°é‡Œå¸‚é›† - Google Analytics 4 è¿½è¹¤è¨ˆåŠƒ

**ç›®çš„**: å®šç¾©Appå…§é—œéµäº‹ä»¶èˆ‡è½‰æ›ç›®æ¨™ï¼Œè¿½è¹¤ç”¨æˆ¶è¡Œç‚ºèˆ‡ç”¢å“æˆæ•ˆ
**åˆ†æå·¥å…·**: Google Analytics 4 (GA4) + Firebase Analytics
**æ›´æ–°æ—¥æœŸ**: 2025-11-13
**ç‰ˆæœ¬**: 1.0

---

## ç›®éŒ„

1. [é—œéµæŒ‡æ¨™å®šç¾©ï¼ˆNorth Star Metricsï¼‰](#é—œéµæŒ‡æ¨™å®šç¾©)
2. [äº‹ä»¶æ¶æ§‹è¨­è¨ˆ](#äº‹ä»¶æ¶æ§‹è¨­è¨ˆ)
3. [æ ¸å¿ƒäº‹ä»¶è¿½è¹¤](#æ ¸å¿ƒäº‹ä»¶è¿½è¹¤)
4. [è½‰æ›ç›®æ¨™è¨­å®š](#è½‰æ›ç›®æ¨™è¨­å®š)
5. [ç”¨æˆ¶æ—…ç¨‹è¿½è¹¤](#ç”¨æˆ¶æ—…ç¨‹è¿½è¹¤)
6. [æ¼æ–—åˆ†æè¨­å®š](#æ¼æ–—åˆ†æè¨­å®š)
7. [è‡ªå®šç¾©ç¶­åº¦èˆ‡æŒ‡æ¨™](#è‡ªå®šç¾©ç¶­åº¦èˆ‡æŒ‡æ¨™)
8. [å„€è¡¨æ¿è¨­è¨ˆ](#å„€è¡¨æ¿è¨­è¨ˆ)
9. [å¯¦ä½œä»£ç¢¼ç¯„ä¾‹](#å¯¦ä½œä»£ç¢¼ç¯„ä¾‹)
10. [æ•¸æ“šæ²»ç†è¦ç¯„](#æ•¸æ“šæ²»ç†è¦ç¯„)

---

## é—œéµæŒ‡æ¨™å®šç¾©ï¼ˆNorth Star Metricsï¼‰

### åŒ—æ¥µæ˜ŸæŒ‡æ¨™

**ä¸»è¦æŒ‡æ¨™**: **æœˆæ´»èºäº¤æ˜“ç”¨æˆ¶æ•¸ï¼ˆMonthly Active Transaction Users, MATUï¼‰**

**å®šç¾©**: æ¯æœˆè‡³å°‘å®Œæˆä¸€æ¬¡äº¤æ˜“ï¼ˆè²·æˆ–è³£ï¼‰çš„ç¨ç«‹ç”¨æˆ¶æ•¸

**ç‚ºä»€éº¼é¸é€™å€‹æŒ‡æ¨™ï¼Ÿ**
- ä»£è¡¨å¹³å°çœŸå¯¦åƒ¹å€¼ï¼ˆä¸åªè¨»å†Šï¼Œè€Œæ˜¯å¯¦éš›ä½¿ç”¨ï¼‰
- çµåˆäº†ä¾›çµ¦ç«¯ï¼ˆè³£å®¶ï¼‰èˆ‡éœ€æ±‚ç«¯ï¼ˆè²·å®¶ï¼‰
- èˆ‡å•†æ¥­ç›®æ¨™ç›´æ¥ç›¸é—œï¼ˆæœªä¾†æŠ½æˆåŸºæ–¼äº¤æ˜“é‡ï¼‰
- å¯åˆ†è§£ç‚ºå¤šå€‹å­æŒ‡æ¨™é€²è¡Œå„ªåŒ–

---

### é—œéµè¼”åŠ©æŒ‡æ¨™ï¼ˆKPIsï¼‰

#### 1. ç”¨æˆ¶ç²å–æŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **æ–°ç”¨æˆ¶æ•¸** | æ¯æœˆæ–°è¨»å†Šç”¨æˆ¶ | 100+/æœˆ | æ¯æ—¥ |
| **ä¸‹è¼‰è½‰è¨»å†Šç‡** | ä¸‹è¼‰Appå¾Œå®Œæˆè¨»å†Šçš„æ¯”ä¾‹ | > 60% | æ¯é€± |
| **è¨»å†Šè½‰é©—è­‰ç‡** | è¨»å†Šå¾Œå®Œæˆç¤¾å€é©—è­‰çš„æ¯”ä¾‹ | > 40% | æ¯é€± |
| **é©—è­‰è½‰ç™¼å¸ƒç‡** | é©—è­‰å¾Œç™¼å¸ƒé¦–ä»¶å•†å“çš„æ¯”ä¾‹ | > 30% | æ¯é€± |
| **CACï¼ˆç”¨æˆ¶ç²å–æˆæœ¬ï¼‰** | æ¯ç²å–ä¸€å€‹é©—è­‰ç”¨æˆ¶çš„æˆæœ¬ | < NT$50 | æ¯æœˆ |

#### 2. ç”¨æˆ¶æ´»èºåº¦æŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **DAUï¼ˆæ—¥æ´»èºç”¨æˆ¶ï¼‰** | æ¯æ—¥æ‰“é–‹Appçš„ç¨ç«‹ç”¨æˆ¶æ•¸ | 20+ | æ¯æ—¥ |
| **MAUï¼ˆæœˆæ´»èºç”¨æˆ¶ï¼‰** | æ¯æœˆæ‰“é–‹Appçš„ç¨ç«‹ç”¨æˆ¶æ•¸ | 200+ | æ¯æœˆ |
| **DAU/MAUæ¯”ç‡** | ç”¨æˆ¶é»æ€§æŒ‡æ¨™ | > 15% | æ¯é€± |
| **å¹³å‡ä½¿ç”¨æ™‚é•·** | æ¯æ¬¡sessionå¹³å‡æ™‚é•· | > 3åˆ†é˜ | æ¯é€± |
| **æ¯é€±ä½¿ç”¨é »ç‡** | æ¯é€±å¹³å‡æ‰“é–‹Appæ¬¡æ•¸ | > 3æ¬¡ | æ¯é€± |

#### 3. ä¾›çµ¦ç«¯æŒ‡æ¨™ï¼ˆè³£å®¶ï¼‰

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **å•†å“ç™¼å¸ƒæ•¸** | æ¯æœˆæ–°ç™¼å¸ƒçš„å•†å“æ•¸é‡ | 100+ä»¶/æœˆ | æ¯æ—¥ |
| **æ´»èºè³£å®¶æ•¸** | æ¯æœˆè‡³å°‘ç™¼å¸ƒ1ä»¶å•†å“çš„ç”¨æˆ¶æ•¸ | 30+/æœˆ | æ¯é€± |
| **å¹³å‡å•†å“ä¸Šæ¶æ™‚é–“** | å¾ç™¼å¸ƒåˆ°å”®å‡º/ä¸‹æ¶çš„å¹³å‡å¤©æ•¸ | < 7å¤© | æ¯é€± |
| **å•†å“å”®å‡ºç‡** | å•†å“æœ€çµ‚å”®å‡ºçš„æ¯”ä¾‹ | > 25% | æ¯æœˆ |
| **è³£å®¶ç•™å­˜ç‡** | ç™¼å¸ƒå¾ŒæŒçºŒæ´»èºçš„è³£å®¶æ¯”ä¾‹ | > 40% | æ¯æœˆ |

#### 4. éœ€æ±‚ç«¯æŒ‡æ¨™ï¼ˆè²·å®¶ï¼‰

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **å•†å“ç€è¦½æ•¸** | æ¯æœˆå•†å“è©³æƒ…é ç€è¦½æ¬¡æ•¸ | 1000+/æœˆ | æ¯æ—¥ |
| **ç•™è¨€æ•¸** | æ¯æœˆå•†å“ç•™è¨€æ•¸é‡ | 200+/æœˆ | æ¯æ—¥ |
| **æ´»èºè²·å®¶æ•¸** | æ¯æœˆè‡³å°‘ç•™è¨€1æ¬¡çš„ç”¨æˆ¶æ•¸ | 50+/æœˆ | æ¯é€± |
| **ç€è¦½è½‰ç•™è¨€ç‡** | ç€è¦½å•†å“å¾Œç™¼è¡¨ç•™è¨€çš„æ¯”ä¾‹ | > 20% | æ¯é€± |
| **ç•™è¨€è½‰äº¤æ˜“ç‡** | ç•™è¨€å¾Œå®Œæˆäº¤æ˜“çš„æ¯”ä¾‹ | > 30% | æ¯é€± |

#### 5. äº¤æ˜“æŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **äº¤æ˜“å®Œæˆæ•¸** | æ¯æœˆæˆåŠŸå®Œæˆçš„äº¤æ˜“æ•¸é‡ | 100+ç­†/æœˆ | æ¯æ—¥ |
| **äº¤æ˜“å®Œæˆç‡** | ç™¼å¸ƒå•†å“æœ€çµ‚å®Œæˆäº¤æ˜“çš„æ¯”ä¾‹ | > 25% | æ¯é€± |
| **å¹³å‡äº¤æ˜“é‡‘é¡** | æ¯ç­†äº¤æ˜“çš„å¹³å‡é‡‘é¡ | NT$500-1000 | æ¯é€± |
| **äº¤æ˜“GMV** | ç¸½äº¤æ˜“é‡‘é¡ï¼ˆGross Merchandise Valueï¼‰ | NT$50,000+/æœˆ | æ¯æœˆ |
| **è©•åƒ¹å®Œæˆç‡** | äº¤æ˜“å¾Œé›™æ–¹å®Œæˆè©•åƒ¹çš„æ¯”ä¾‹ | > 80% | æ¯é€± |

#### 6. ç•™å­˜æŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **æ¬¡æ—¥ç•™å­˜ï¼ˆD1ï¼‰** | è¨»å†Šå¾Œç¬¬2å¤©å›ä¾†çš„ç”¨æˆ¶æ¯”ä¾‹ | > 50% | æ¯æ—¥ |
| **é€±ç•™å­˜ï¼ˆD7ï¼‰** | è¨»å†Šå¾Œç¬¬7å¤©å›ä¾†çš„ç”¨æˆ¶æ¯”ä¾‹ | > 35% | æ¯é€± |
| **æœˆç•™å­˜ï¼ˆD30ï¼‰** | è¨»å†Šå¾Œç¬¬30å¤©å›ä¾†çš„ç”¨æˆ¶æ¯”ä¾‹ | > 40% | æ¯æœˆ |
| **äº¤æ˜“ç•™å­˜** | å®Œæˆé¦–æ¬¡äº¤æ˜“å¾ŒæŒçºŒäº¤æ˜“çš„æ¯”ä¾‹ | > 50% | æ¯æœˆ |

#### 7. ç¤¾å€å¥åº·åº¦æŒ‡æ¨™

| æŒ‡æ¨™ | å®šç¾© | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | è¿½è¹¤é »ç‡ |
|------|------|---------------|----------|
| **ç¤¾å€æ»²é€ç‡** | å·²é©—è­‰ç”¨æˆ¶ / ç¤¾å€ç¸½æˆ¶æ•¸ | > 10% | æ¯é€± |
| **ç¤¾å€æ´»èºåº¦** | æ¯å€‹ç¤¾å€æ¯é€±æ–°å¢å•†å“æ•¸ | > 5ä»¶/é€± | æ¯é€± |
| **ç¤¾å€äº¤æ˜“å¯†åº¦** | æ¯å€‹ç¤¾å€æ¯æœˆäº¤æ˜“æ•¸ | > 10ç­†/æœˆ | æ¯æœˆ |
| **è·¨ç¤¾å€äº¤æ˜“æ¯”ä¾‹** | è²·è³£é›™æ–¹ä¾†è‡ªä¸åŒç¤¾å€çš„äº¤æ˜“æ¯”ä¾‹ | < 5%ï¼ˆè¶Šä½è¶Šå¥½ï¼‰| æ¯æœˆ |

---

## äº‹ä»¶æ¶æ§‹è¨­è¨ˆ

### äº‹ä»¶å‘½åè¦ç¯„

**æ ¼å¼**: `{object}_{action}` æˆ– `{action}_{object}`

**ç¯„ä¾‹**:
- `item_view` - æŸ¥çœ‹å•†å“
- `item_publish` - ç™¼å¸ƒå•†å“
- `comment_post` - ç™¼è¡¨ç•™è¨€
- `transaction_complete` - å®Œæˆäº¤æ˜“

**è¦å‰‡**:
- ä½¿ç”¨å°å¯«å­—æ¯
- å–®è©é–“ç”¨åº•ç·šåˆ†éš”
- å‹•è©åœ¨å‰æˆ–åœ¨å¾Œä¿æŒä¸€è‡´
- é¿å…éé•·çš„äº‹ä»¶åç¨±ï¼ˆ< 40å­—å…ƒï¼‰

---

### äº‹ä»¶åˆ†é¡

#### Tier 1: æ ¸å¿ƒè½‰æ›äº‹ä»¶ï¼ˆCriticalï¼‰
**å®šç¾©**: ç›´æ¥å½±éŸ¿åŒ—æ¥µæ˜ŸæŒ‡æ¨™çš„é—œéµè¡Œç‚º
- `sign_up` - è¨»å†Š
- `community_verify` - ç¤¾å€é©—è­‰
- `item_publish` - ç™¼å¸ƒå•†å“
- `comment_post` - ç™¼è¡¨ç•™è¨€
- `transaction_complete` - å®Œæˆäº¤æ˜“
- `rating_submit` - æäº¤è©•åƒ¹

#### Tier 2: é‡è¦åŠŸèƒ½äº‹ä»¶ï¼ˆImportantï¼‰
**å®šç¾©**: é‡è¦ä½†éæ ¸å¿ƒè½‰æ›çš„åŠŸèƒ½ä½¿ç”¨
- `item_view` - æŸ¥çœ‹å•†å“è©³æƒ…
- `search` - æœå°‹
- `filter_apply` - å¥—ç”¨ç¯©é¸
- `negotiation_start` - é–‹å§‹è­°åƒ¹
- `pickup_method_select` - é¸æ“‡å–è²¨æ–¹å¼
- `notification_click` - é»æ“Šæ¨æ’­é€šçŸ¥

#### Tier 3: è¼”åŠ©åˆ†æäº‹ä»¶ï¼ˆNice-to-haveï¼‰
**å®šç¾©**: ç”¨æ–¼æ·±åº¦åˆ†æèˆ‡å„ªåŒ–çš„è¼”åŠ©äº‹ä»¶
- `onboarding_start` - é–‹å§‹å¼•å°æµç¨‹
- `onboarding_complete` - å®Œæˆå¼•å°
- `tutorial_view` - è§€çœ‹æ•™å­¸
- `photo_upload` - ä¸Šå‚³ç…§ç‰‡
- `url_paste` - è²¼ä¸Šå•†å“ç¶²å€
- `quick_reply_use` - ä½¿ç”¨å¿«é€Ÿå›è¦†

---

## æ ¸å¿ƒäº‹ä»¶è¿½è¹¤

### 1. ç”¨æˆ¶è¨»å†Šèˆ‡é©—è­‰

#### Event: `sign_up`
**è§¸ç™¼æ™‚æ©Ÿ**: å®Œæˆç¬¬ä¸‰æ–¹ç™»å…¥è¨»å†Š

**åƒæ•¸**:
```javascript
{
  method: string,           // è¨»å†Šæ–¹å¼: "google" | "apple" | "line"
  timestamp: number,        // è¨»å†Šæ™‚é–“æˆ³
  referral_source: string   // æ¨è–¦ä¾†æº: "organic" | "friend" | "ad" | "community_admin"
}
```

**è½‰æ›åƒ¹å€¼**: é«˜ï¼ˆè¨»å†Šæ˜¯ç¬¬ä¸€æ­¥ï¼‰

**è¿½è¹¤ç›®æ¨™**:
- å„ç¬¬ä¸‰æ–¹ç™»å…¥æ–¹å¼çš„è½‰æ›ç‡
- ä¸åŒä¾†æºçš„è¨»å†Šè³ªé‡ï¼ˆå¾ŒçºŒç•™å­˜ç‡ï¼‰

---

#### Event: `community_verify`
**è§¸ç™¼æ™‚æ©Ÿ**: å®Œæˆç¤¾å€èº«ä»½é©—è­‰ï¼ˆæƒæQR CodeæˆåŠŸï¼‰

**åƒæ•¸**:
```javascript
{
  community_id: string,           // ç¤¾å€ID
  community_name: string,         // ç¤¾å€åç¨±
  verification_method: string,    // é©—è­‰æ–¹å¼: "qr_code" | "manual"
  days_since_signup: number,      // è¨»å†Šå¾Œå¹¾å¤©æ‰é©—è­‰
  verification_location: string   // é©—è­‰åœ°é»: "management_office" | "other"
}
```

**è½‰æ›åƒ¹å€¼**: æ¥µé«˜ï¼ˆé©—è­‰å¾Œæ‰èƒ½å®Œæ•´ä½¿ç”¨ï¼‰

**è¿½è¹¤ç›®æ¨™**:
- è¨»å†Šåˆ°é©—è­‰çš„æ™‚é–“å·®ï¼ˆè¶ŠçŸ­è¶Šå¥½ï¼‰
- é©—è­‰è½‰æ›ç‡
- å“ªäº›ç¤¾å€é©—è­‰ç‡è¼ƒé«˜

---

### 2. å•†å“ç™¼å¸ƒ

#### Event: `item_publish_start`
**è§¸ç™¼æ™‚æ©Ÿ**: é»æ“Šã€Œç™¼å¸ƒå•†å“ã€æŒ‰éˆ•

**åƒæ•¸**:
```javascript
{
  entry_point: string  // å…¥å£: "home_fab" | "profile_tab" | "onboarding_prompt"
}
```

---

#### Event: `item_publish_complete`
**è§¸ç™¼æ™‚æ©Ÿ**: æˆåŠŸç™¼å¸ƒå•†å“

**åƒæ•¸**:
```javascript
{
  item_id: string,              // å•†å“ID
  category: string,             // åˆ†é¡: "furniture" | "appliances" | "baby" | "books" | "clothing" | "sports" | "other"
  condition: string,            // ç‹€æ…‹: "new" | "used"
  price: number,                // åƒ¹æ ¼ï¼ˆNT$ï¼‰
  is_negotiable: boolean,       // æ˜¯å¦å¯è­°åƒ¹
  has_url: boolean,             // æ˜¯å¦æœ‰å•†å“ç¶²å€
  url_source: string,           // ç¶²å€ä¾†æº: "momo" | "shopee" | "pchome" | "yahoo" | "other" | null
  usage_time: string,           // ä½¿ç”¨æ™‚é–“: "unused" | "less_1m" | "1_6m" | "6m_1y" | "1_3y" | "3y_plus"
  photo_count: number,          // ç…§ç‰‡æ•¸é‡ï¼ˆå›ºå®š4ï¼‰
  description_length: number,   // æ‘˜è¦å­—æ•¸
  time_to_complete: number,     // ç™¼å¸ƒæµç¨‹è€—æ™‚ï¼ˆç§’ï¼‰
  user_type: string             // ç”¨æˆ¶é¡å‹: "first_time" | "returning"
}
```

**è½‰æ›åƒ¹å€¼**: æ¥µé«˜ï¼ˆä¾›çµ¦ç«¯æ ¸å¿ƒè¡Œç‚ºï¼‰

**è¿½è¹¤ç›®æ¨™**:
- å„åˆ†é¡å•†å“æ•¸é‡åˆ†å¸ƒ
- æ–°æ‰‹ vs. è€æ‰‹çš„ç™¼å¸ƒæ™‚é–“å·®ç•°
- æœ‰ç¶²å€ vs. ç„¡ç¶²å€çš„å”®å‡ºç‡å·®ç•°
- ç™¼å¸ƒæµç¨‹çš„å¹³å‡è€—æ™‚ï¼ˆç›®æ¨™< 2åˆ†é˜ï¼‰

---

#### Event: `item_publish_abandoned`
**è§¸ç™¼æ™‚æ©Ÿ**: é–‹å§‹ç™¼å¸ƒä½†ä¸­é€”æ”¾æ£„ï¼ˆé›¢é–‹é é¢ï¼‰

**åƒæ•¸**:
```javascript
{
  last_step: string,      // æœ€å¾Œå®Œæˆçš„æ­¥é©Ÿ: "photo" | "condition" | "url" | "title" | "description" | "usage" | "price"
  time_spent: number,     // èŠ±äº†å¤šå°‘æ™‚é–“ï¼ˆç§’ï¼‰
  abandon_reason: string  // æ”¾æ£„åŸå› ï¼ˆè‹¥æœ‰å½ˆçª—è©¢å•ï¼‰
}
```

**è¿½è¹¤ç›®æ¨™**:
- æ‰¾å‡ºç™¼å¸ƒæµç¨‹çš„æ‘©æ“¦é»
- å„ªåŒ–æµå¤±ç‡é«˜çš„æ­¥é©Ÿ

---

### 3. å•†å“ç€è¦½èˆ‡æœå°‹

#### Event: `item_view`
**è§¸ç™¼æ™‚æ©Ÿ**: æ‰“é–‹å•†å“è©³æƒ…é 

**åƒæ•¸**:
```javascript
{
  item_id: string,
  category: string,
  price: number,
  seller_id: string,
  seller_rating: number,        // è³£å®¶è©•åˆ†
  seller_transaction_count: number, // è³£å®¶äº¤æ˜“æ¬¡æ•¸
  days_since_published: number, // ç™¼å¸ƒå¾Œå¹¾å¤©
  view_source: string,          // ä¾†æº: "home_feed" | "search" | "category" | "notification" | "profile"
  is_same_community: boolean    // æ˜¯å¦åŒç¤¾å€
}
```

**è¿½è¹¤ç›®æ¨™**:
- å“ªäº›å•†å“/åˆ†é¡æœ€å—æ­¡è¿
- ä¸åŒä¾†æºçš„è½‰æ›ç‡å·®ç•°
- åŒç¤¾å€ vs. è·¨ç¤¾å€çš„ç€è¦½è¡Œç‚º

---

#### Event: `search`
**è§¸ç™¼æ™‚æ©Ÿ**: åŸ·è¡Œæœå°‹

**åƒæ•¸**:
```javascript
{
  search_term: string,      // æœå°‹é—œéµå­—
  result_count: number,     // çµæœæ•¸é‡
  filters_applied: array,   // å¥—ç”¨çš„ç¯©é¸: ["price_low_high", "community_filter", "category_filter"]
  is_zero_results: boolean  // æ˜¯å¦é›¶çµæœ
}
```

**è¿½è¹¤ç›®æ¨™**:
- ç†±é–€æœå°‹é—œéµå­—ï¼ˆå„ªåŒ–åˆ†é¡èˆ‡æ¨™ç±¤ï¼‰
- é›¶çµæœæœå°‹ï¼ˆæ”¹é€²æœå°‹æ¼”ç®—æ³•ï¼‰

---

### 4. ç•™è¨€èˆ‡è­°åƒ¹

#### Event: `comment_post`
**è§¸ç™¼æ™‚æ©Ÿ**: ç™¼è¡¨ç•™è¨€

**åƒæ•¸**:
```javascript
{
  item_id: string,
  comment_type: string,       // ç•™è¨€é¡å‹: "public" | "private"
  is_quick_reply: boolean,    // æ˜¯å¦ä½¿ç”¨å¿«é€Ÿå›è¦†
  comment_length: number,     // ç•™è¨€å­—æ•¸
  is_negotiation: boolean,    // æ˜¯å¦ç‚ºè­°åƒ¹ç•™è¨€
  user_role: string           // è§’è‰²: "buyer" | "seller" | "other"
}
```

**è½‰æ›åƒ¹å€¼**: é«˜ï¼ˆè³¼è²·æ„å‘å¼·ï¼‰

---

#### Event: `negotiation_start`
**è§¸ç™¼æ™‚æ©Ÿ**: ä½¿ç”¨ä¸€éµè­°åƒ¹åŠŸèƒ½

**åƒæ•¸**:
```javascript
{
  item_id: string,
  original_price: number,     // åŸåƒ¹
  offered_price: number,      // å‡ºåƒ¹
  discount_percent: number,   // æŠ˜æ‰£ç™¾åˆ†æ¯”
  negotiation_method: string  // è­°åƒ¹æ–¹å¼: "slider" | "input"
}
```

---

#### Event: `negotiation_respond`
**è§¸ç™¼æ™‚æ©Ÿ**: è³£å®¶å›æ‡‰è­°åƒ¹

**åƒæ•¸**:
```javascript
{
  item_id: string,
  response_type: string,      // å›æ‡‰é¡å‹: "accept" | "reject" | "counter_offer"
  counter_price: number,      // åè­°åƒ¹ï¼ˆè‹¥æœ‰ï¼‰
  response_time: number       // å›æ‡‰è€—æ™‚ï¼ˆåˆ†é˜ï¼‰
}
```

**è¿½è¹¤ç›®æ¨™**:
- è­°åƒ¹æˆåŠŸç‡
- è­°åƒ¹å°æˆäº¤çš„å½±éŸ¿
- è³£å®¶å›æ‡‰æ™‚é–“ï¼ˆè¶Šå¿«è¶Šå¥½ï¼‰

---

### 5. äº¤æ˜“å®Œæˆ

#### Event: `pickup_method_select`
**è§¸ç™¼æ™‚æ©Ÿ**: é¸æ“‡å–è²¨æ–¹å¼

**åƒæ•¸**:
```javascript
{
  item_id: string,
  method: string,             // å–è²¨æ–¹å¼: "management_pickup" | "public_area" | "door_meetup"
  is_cash_only: boolean       // æ˜¯å¦ç¾é‡‘äº¤æ˜“ï¼ˆMVPéšæ®µéƒ½æ˜¯trueï¼‰
}
```

**è¿½è¹¤ç›®æ¨™**:
- å„å–è²¨æ–¹å¼çš„ä½¿ç”¨ç‡
- ç®¡ç†å®¤ä»£æ”¶çš„ä½¿ç”¨ç‡ï¼ˆé©—è­‰éœ€æ±‚ï¼‰

---

#### Event: `transaction_complete`
**è§¸ç™¼æ™‚æ©Ÿ**: äº¤æ˜“æ¨™è¨˜ç‚ºå®Œæˆï¼ˆè²·è³£é›™æ–¹ç¢ºèªï¼‰

**åƒæ•¸**:
```javascript
{
  transaction_id: string,
  item_id: string,
  seller_id: string,
  buyer_id: string,
  final_price: number,              // æœ€çµ‚æˆäº¤åƒ¹
  original_price: number,           // åŸå§‹å®šåƒ¹
  discount_amount: number,          // æŠ˜æ‰£é‡‘é¡
  pickup_method: string,            // å–è²¨æ–¹å¼
  payment_method: string,           // ä»˜æ¬¾æ–¹å¼: "cash" (MVPåƒ…æ­¤)
  days_to_complete: number,         // å¾ç™¼å¸ƒåˆ°æˆäº¤çš„å¤©æ•¸
  comment_count: number,            // è©²å•†å“çš„ç•™è¨€æ•¸
  is_same_community: boolean,       // æ˜¯å¦åŒç¤¾å€äº¤æ˜“
  community_id: string              // äº¤æ˜“ç¤¾å€ID
}
```

**è½‰æ›åƒ¹å€¼**: æ¥µé«˜ï¼ˆæ ¸å¿ƒè½‰æ›ï¼‰

**è¿½è¹¤ç›®æ¨™**:
- äº¤æ˜“å®Œæˆç‡
- æˆäº¤åƒ¹ vs. åŸåƒ¹çš„æŠ˜æ‰£ç‡
- å„å–è²¨æ–¹å¼çš„æˆäº¤ç‡å·®ç•°
- å¾ç™¼å¸ƒåˆ°æˆäº¤çš„æ™‚é–“ï¼ˆè¶ŠçŸ­è¶Šå¥½ï¼‰

---

### 6. è©•åƒ¹ç³»çµ±

#### Event: `rating_submit`
**è§¸ç™¼æ™‚æ©Ÿ**: æäº¤è©•åƒ¹

**åƒæ•¸**:
```javascript
{
  transaction_id: string,
  rating_score: number,       // è©•åˆ†: 1-5
  has_comment: boolean,       // æ˜¯å¦æœ‰æ–‡å­—è©•åƒ¹
  comment_length: number,     // è©•åƒ¹å­—æ•¸
  user_role: string,          // è©•åƒ¹è€…è§’è‰²: "buyer" | "seller"
  days_after_transaction: number // äº¤æ˜“å¾Œå¹¾å¤©è©•åƒ¹
}
```

**è¿½è¹¤ç›®æ¨™**:
- è©•åƒ¹å®Œæˆç‡ï¼ˆç›®æ¨™> 80%ï¼‰
- å¹³å‡è©•åˆ†åˆ†å¸ƒ
- è² è©•æ¯”ä¾‹èˆ‡åŸå› 

---

### 7. ç®¡ç†å®¤ä»£æ”¶å°ˆç”¨äº‹ä»¶

#### Event: `management_pickup_create`
**è§¸ç™¼æ™‚æ©Ÿ**: å‰µå»ºç®¡ç†å®¤ä»£æ”¶è¨‚å–®

**åƒæ•¸**:
```javascript
{
  item_id: string,
  pickup_code: string,        // 6ä½æ•¸ä»£æ”¶ç·¨è™Ÿ
  estimated_amount: number    // é ä¼°é‡‘é¡
}
```

---

#### Event: `management_pickup_delivered`
**è§¸ç™¼æ™‚æ©Ÿ**: è³£å®¶å°‡å•†å“é€é”ç®¡ç†å®¤ï¼ˆç®¡ç†å“¡ç™»è¨˜ï¼‰

**åƒæ•¸**:
```javascript
{
  item_id: string,
  pickup_code: string,
  admin_id: string,           // ç®¡ç†å“¡ID
  delivery_time: number       // å¾å‰µå»ºåˆ°é€é”çš„æ™‚é–“ï¼ˆå°æ™‚ï¼‰
}
```

---

#### Event: `management_pickup_collected`
**è§¸ç™¼æ™‚æ©Ÿ**: è²·å®¶å–è²¨ï¼ˆç®¡ç†å“¡ç™»è¨˜ï¼‰

**åƒæ•¸**:
```javascript
{
  item_id: string,
  pickup_code: string,
  admin_id: string,
  actual_amount: number,      // å¯¦éš›é‡‘é¡
  collection_time: number     // å¾é€é”åˆ°å–è²¨çš„æ™‚é–“ï¼ˆå°æ™‚ï¼‰
}
```

**è¿½è¹¤ç›®æ¨™**:
- ç®¡ç†å®¤ä»£æ”¶æµç¨‹å„éšæ®µè€—æ™‚
- ç®¡ç†å®¤ä»£æ”¶çš„å®Œæˆç‡
- å“ªäº›ç¤¾å€ä½¿ç”¨ç‡è¼ƒé«˜

---

### 8. æ¨æ’­é€šçŸ¥

#### Event: `notification_receive`
**è§¸ç™¼æ™‚æ©Ÿ**: æ”¶åˆ°æ¨æ’­é€šçŸ¥ï¼ˆè‡ªå‹•è¨˜éŒ„ï¼‰

**åƒæ•¸**:
```javascript
{
  notification_type: string,  // é€šçŸ¥é¡å‹: "new_comment" | "comment_reply" | "item_sold" | "pickup_ready"
  item_id: string,
  is_foreground: boolean      // æ˜¯å¦å‰æ™¯æ”¶åˆ°
}
```

---

#### Event: `notification_click`
**è§¸ç™¼æ™‚æ©Ÿ**: é»æ“Šæ¨æ’­é€šçŸ¥

**åƒæ•¸**:
```javascript
{
  notification_type: string,
  item_id: string,
  time_to_click: number       // æ”¶åˆ°å¾Œå¹¾åˆ†é˜é»æ“Š
}
```

**è¿½è¹¤ç›®æ¨™**:
- æ¨æ’­é€šçŸ¥é»æ“Šç‡
- å“ªç¨®é¡å‹é€šçŸ¥æœ€æœ‰æ•ˆ
- æ¨æ’­åˆ°é»æ“Šçš„æ™‚é–“å·®

---

## è½‰æ›ç›®æ¨™è¨­å®š

### GA4 è½‰æ›äº‹ä»¶é…ç½®

åœ¨GA4ä¸­å°‡ä»¥ä¸‹äº‹ä»¶æ¨™è¨˜ç‚ºã€Œè½‰æ›ã€ï¼š

| è½‰æ›äº‹ä»¶ | å„ªå…ˆç´š | ç›®æ¨™å€¼ï¼ˆMVPï¼‰ | å‚™è¨» |
|---------|--------|---------------|------|
| `sign_up` | P1 | 100+/æœˆ | æ–°ç”¨æˆ¶è¨»å†Š |
| `community_verify` | P0 | 40+/æœˆ | é©—è­‰æ˜¯å•Ÿå‹•é—œéµ |
| `item_publish_complete` | P0 | 100+/æœˆ | ä¾›çµ¦ç«¯æ ¸å¿ƒ |
| `comment_post` | P1 | 200+/æœˆ | è³¼è²·æ„å‘ |
| `transaction_complete` | P0 | 100+/æœˆ | æœ€çµ‚è½‰æ› |
| `rating_submit` | P1 | 160+/æœˆ | äº¤æ˜“è³ªé‡æŒ‡æ¨™ |

---

### è½‰æ›æ¼æ–—ï¼ˆConversion Funnelsï¼‰

#### æ¼æ–—1ï¼šæ–°ç”¨æˆ¶å•Ÿå‹•ï¼ˆUser Activationï¼‰

```
ä¸‹è¼‰App (100%)
   â†“ ç›®æ¨™> 60%
è¨»å†ŠæˆåŠŸ (60%)
   â†“ ç›®æ¨™> 40%
ç¤¾å€é©—è­‰ (24%)
   â†“ ç›®æ¨™> 30%
ç™¼å¸ƒé¦–ä»¶å•†å“ (7.2%)
```

**å„ªåŒ–é‡é»**:
- æå‡è¨»å†Šç‡ï¼šå„ªåŒ–Onboardingé«”é©—
- æå‡é©—è­‰ç‡ï¼šé™ä½é©—è­‰é–€æª»ã€æä¾›è©¦ç”¨æœŸ
- æå‡é¦–æ¬¡ç™¼å¸ƒç‡ï¼šå¼•å°æ•™å­¸ã€ç°¡åŒ–æµç¨‹

---

#### æ¼æ–—2ï¼šå•†å“äº¤æ˜“ï¼ˆItem Transactionï¼‰

```
å•†å“ç™¼å¸ƒ (100%)
   â†“ ç›®æ¨™> 80%
æ”¶åˆ°é¦–æ¢ç•™è¨€ (80%)
   â†“ ç›®æ¨™> 50%
é–‹å§‹è­°åƒ¹/ç´„å®š (40%)
   â†“ ç›®æ¨™> 75%
äº¤æ˜“å®Œæˆ (30%)
   â†“ ç›®æ¨™> 80%
é›™æ–¹è©•åƒ¹ (24%)
```

**å„ªåŒ–é‡é»**:
- æå‡ç•™è¨€ç‡ï¼šå„ªåŒ–å•†å“å±•ç¤ºã€æ¨è–¦æ©Ÿåˆ¶
- æå‡äº¤æ˜“å®Œæˆç‡ï¼šç°¡åŒ–äº¤æ˜“æµç¨‹ã€æä¾›ç®¡ç†å®¤ä»£æ”¶
- æå‡è©•åƒ¹ç‡ï¼šæ¨æ’­æé†’ã€ç°¡åŒ–è©•åƒ¹æµç¨‹

---

#### æ¼æ–—3ï¼šè²·å®¶è³¼è²·ï¼ˆBuyer Purchaseï¼‰

```
é¦–é ç€è¦½ (100%)
   â†“ ç›®æ¨™> 30%
é»æ“Šå•†å“ (30%)
   â†“ ç›®æ¨™> 20%
ç™¼è¡¨ç•™è¨€ (6%)
   â†“ ç›®æ¨™> 30%
å®Œæˆäº¤æ˜“ (1.8%)
```

**å„ªåŒ–é‡é»**:
- æå‡é»æ“Šç‡ï¼šå„ªåŒ–å•†å“å¡è¨­è¨ˆã€ç…§ç‰‡å“è³ª
- æå‡ç•™è¨€ç‡ï¼šé™ä½ç•™è¨€é–€æª»ã€å¿«é€Ÿå›è¦†ç¯„æœ¬
- æå‡æˆäº¤ç‡ï¼šä¸€éµè­°åƒ¹ã€ç®¡ç†å®¤ä»£æ”¶

---

## ç”¨æˆ¶æ—…ç¨‹è¿½è¹¤

### é—œéµç”¨æˆ¶æ—…ç¨‹äº‹ä»¶åºåˆ—

#### æ—…ç¨‹1ï¼šé¦–æ¬¡è³£å®¶ï¼ˆç‹ç¾ç² - é€€ä¼‘é˜¿å§¨ï¼‰

```javascript
// ç¬¬1å¤©
sign_up { method: "line" }
  â†’ onboarding_start
  â†’ onboarding_view { step: "community_verify_prompt" }
  â†’ community_verify { days_since_signup: 0 }

// ç¬¬2å¤©
item_publish_start { entry_point: "onboarding_prompt" }
  â†’ photo_upload { count: 4 }
  â†’ url_paste { source: "momo" }
  â†’ item_publish_complete { time_to_complete: 180, user_type: "first_time" }

// ç¬¬3å¤©
notification_receive { type: "new_comment" }
  â†’ notification_click
  â†’ comment_view
  â†’ comment_reply { is_quick_reply: true }

// ç¬¬5å¤©
pickup_method_select { method: "management_pickup" }
  â†’ management_pickup_create
  â†’ management_pickup_delivered

// ç¬¬6å¤©
management_pickup_collected
  â†’ transaction_complete
  â†’ rating_submit { rating_score: 5 }
```

**è¿½è¹¤ç›®æ¨™**:
- å¾è¨»å†Šåˆ°é¦–æ¬¡äº¤æ˜“çš„å¤©æ•¸ï¼ˆD1-D7ï¼‰
- ç®¡ç†å®¤ä»£æ”¶çš„ä½¿ç”¨ç‡
- å¿«é€Ÿå›è¦†çš„ä½¿ç”¨ç‡

---

#### æ—…ç¨‹2ï¼šæ–°æ‰‹åª½åª½ï¼ˆæ—é›…å©·ï¼‰

```javascript
// ç¬¬1å¤©
sign_up { method: "google" }
  â†’ community_verify { days_since_signup: 0 }
  â†’ search { search_term: "å¬°å…’æ¨è»Š" }
  â†’ item_view { view_source: "search" }
  â†’ comment_post { comment_type: "public" }

// ç¬¬2å¤©
negotiation_start { discount_percent: 12.5 }
  â†’ negotiation_respond { response_type: "accept" }
  â†’ pickup_method_select { method: "door_meetup" }
  â†’ transaction_complete
  â†’ rating_submit

// ç¬¬10å¤©ï¼ˆè³£å®¶è¡Œç‚ºï¼‰
item_publish_complete { category: "baby", has_url: true }
  â†’ comment_receive
  â†’ negotiation_respond { response_type: "accept" }
  â†’ transaction_complete
```

**è¿½è¹¤ç›®æ¨™**:
- æœå°‹åˆ°è³¼è²·çš„è½‰æ›ç‡
- è­°åƒ¹æˆåŠŸç‡
- è²·è³£é›™å‘ç”¨æˆ¶çš„åƒ¹å€¼ï¼ˆæ›´é«˜LTVï¼‰

---

## æ¼æ–—åˆ†æè¨­å®š

### GA4 Funnel Exploration é…ç½®

#### æ¼æ–—1ï¼šç”¨æˆ¶å•Ÿå‹•æ¼æ–—

```
æ­¥é©Ÿ1: app_open (é¦–æ¬¡æ‰“é–‹)
æ­¥é©Ÿ2: sign_up (è¨»å†Š)
æ­¥é©Ÿ3: community_verify (é©—è­‰)
æ­¥é©Ÿ4: item_publish_complete OR comment_post (å•Ÿå‹•)
```

**åˆ†æç¶­åº¦**:
- æŒ‰è¨»å†Šæ–¹å¼ï¼ˆGoogle/Apple/LINEï¼‰
- æŒ‰æ¨è–¦ä¾†æºï¼ˆorganic/friend/adï¼‰
- æŒ‰ç¤¾å€ï¼ˆcommunity_idï¼‰

---

#### æ¼æ–—2ï¼šè³£å®¶ç™¼å¸ƒæ¼æ–—

```
æ­¥é©Ÿ1: item_publish_start
æ­¥é©Ÿ2: photo_upload (ä¸Šå‚³ç…§ç‰‡)
æ­¥é©Ÿ3: title_complete (å®Œæˆæ¨™é¡Œ)
æ­¥é©Ÿ4: price_set (è¨­å®šåƒ¹æ ¼)
æ­¥é©Ÿ5: item_publish_complete
```

**åˆ†æç¶­åº¦**:
- æŒ‰ç”¨æˆ¶é¡å‹ï¼ˆfirst_time/returningï¼‰
- æŒ‰åˆ†é¡ï¼ˆcategoryï¼‰
- æŒ‰æ˜¯å¦æœ‰ç¶²å€ï¼ˆhas_urlï¼‰

---

#### æ¼æ–—3ï¼šè²·å®¶è³¼è²·æ¼æ–—

```
æ­¥é©Ÿ1: item_view
æ­¥é©Ÿ2: comment_post OR negotiation_start
æ­¥é©Ÿ3: pickup_method_select
æ­¥é©Ÿ4: transaction_complete
æ­¥é©Ÿ5: rating_submit
```

**åˆ†æç¶­åº¦**:
- æŒ‰å•†å“åˆ†é¡ï¼ˆcategoryï¼‰
- æŒ‰åƒ¹æ ¼å€é–“ï¼ˆ<500, 500-1000, 1000-2000, >2000ï¼‰
- æŒ‰å–è²¨æ–¹å¼ï¼ˆpickup_methodï¼‰

---

## è‡ªå®šç¾©ç¶­åº¦èˆ‡æŒ‡æ¨™

### ç”¨æˆ¶å±¬æ€§ï¼ˆUser Propertiesï¼‰

åœ¨GA4ä¸­è¨­å®šä»¥ä¸‹ç”¨æˆ¶å±¬æ€§ï¼š

| å±¬æ€§åç¨± | é¡å‹ | ç¯„ä¾‹å€¼ | èªªæ˜ |
|---------|------|--------|------|
| `user_community` | string | "community_001" | ç”¨æˆ¶æ‰€å±¬ç¤¾å€ |
| `user_verified` | boolean | true | æ˜¯å¦å·²é©—è­‰ |
| `user_signup_method` | string | "google" | è¨»å†Šæ–¹å¼ |
| `user_role` | string | "buyer_seller" | ç”¨æˆ¶è§’è‰²ï¼ˆbuyer/seller/bothï¼‰ |
| `user_transaction_count` | number | 5 | äº¤æ˜“æ¬¡æ•¸ |
| `user_rating` | number | 4.8 | ç”¨æˆ¶è©•åˆ† |
| `user_days_since_signup` | number | 15 | è¨»å†Šå¤©æ•¸ |
| `user_cohort` | string | "2025-11-W1" | è¨»å†Šé€±æœŸï¼ˆCohortï¼‰ |

---

### è‡ªå®šç¾©æŒ‡æ¨™ï¼ˆCustom Metricsï¼‰

| æŒ‡æ¨™åç¨± | è¨ˆç®—æ–¹å¼ | èªªæ˜ |
|---------|---------|------|
| `avg_time_to_publish` | AVG(time_to_complete) | å¹³å‡ç™¼å¸ƒè€—æ™‚ |
| `avg_item_lifespan` | AVG(days_to_complete) | å•†å“å¹³å‡ä¸Šæ¶å¤©æ•¸ |
| `negotiation_success_rate` | negotiation_respond{accept} / negotiation_start | è­°åƒ¹æˆåŠŸç‡ |
| `transaction_value` | SUM(final_price) | äº¤æ˜“ç¸½é¡ï¼ˆGMVï¼‰ |
| `avg_discount_rate` | AVG(discount_amount / original_price) | å¹³å‡æŠ˜æ‰£ç‡ |

---

## å„€è¡¨æ¿è¨­è¨ˆ

### Dashboard 1: åŒ—æ¥µæ˜ŸæŒ‡æ¨™å„€è¡¨æ¿

**KPIå¡ç‰‡**:
- æœ¬æœˆMATUï¼ˆç›®æ¨™100ï¼‰
- æœ¬æœˆäº¤æ˜“æ•¸ï¼ˆç›®æ¨™100ç­†ï¼‰
- æœ¬æœˆGMVï¼ˆç›®æ¨™NT$50,000ï¼‰
- æœ¬æœˆæ–°å¢é©—è­‰ç”¨æˆ¶ï¼ˆç›®æ¨™40ï¼‰

**åœ–è¡¨**:
1. æ¯æ—¥MATUè¶¨å‹¢åœ–ï¼ˆæŠ˜ç·šåœ–ï¼‰
2. æœ¬æœˆ vs. ä¸Šæœˆå°æ¯”ï¼ˆæŸ±ç‹€åœ–ï¼‰
3. å„ç¤¾å€MATUåˆ†å¸ƒï¼ˆæ©«æ¢åœ–ï¼‰
4. ç”¨æˆ¶è§’è‰²åˆ†å¸ƒï¼ˆåœ“é¤…åœ–ï¼šç´”è²·å®¶/ç´”è³£å®¶/è²·è³£é›™æ–¹ï¼‰

---

### Dashboard 2: ç”¨æˆ¶ç²å–å„€è¡¨æ¿

**KPIå¡ç‰‡**:
- æœ¬é€±æ–°ç”¨æˆ¶æ•¸
- è¨»å†Šè½‰æ›ç‡ï¼ˆä¸‹è¼‰â†’è¨»å†Šï¼‰
- é©—è­‰è½‰æ›ç‡ï¼ˆè¨»å†Šâ†’é©—è­‰ï¼‰
- CACï¼ˆç”¨æˆ¶ç²å–æˆæœ¬ï¼‰

**åœ–è¡¨**:
1. ç”¨æˆ¶ç²å–æ¼æ–—ï¼ˆä¸‹è¼‰â†’è¨»å†Šâ†’é©—è­‰â†’å•Ÿå‹•ï¼‰
2. å„è¨»å†Šæ–¹å¼è½‰æ›ç‡å°æ¯”ï¼ˆGoogle/Apple/LINEï¼‰
3. å„æ¨è–¦ä¾†æºè³ªé‡å°æ¯”ï¼ˆç•™å­˜ç‡ï¼‰
4. æ¯æ—¥æ–°ç”¨æˆ¶è¶¨å‹¢

---

### Dashboard 3: äº¤æ˜“å¥åº·åº¦å„€è¡¨æ¿

**KPIå¡ç‰‡**:
- æœ¬æœˆå•†å“ç™¼å¸ƒæ•¸
- æœ¬æœˆäº¤æ˜“å®Œæˆæ•¸
- å•†å“å”®å‡ºç‡
- è©•åƒ¹å®Œæˆç‡

**åœ–è¡¨**:
1. äº¤æ˜“æ¼æ–—ï¼ˆç™¼å¸ƒâ†’ç•™è¨€â†’äº¤æ˜“â†’è©•åƒ¹ï¼‰
2. å„åˆ†é¡å•†å“æ•¸é‡èˆ‡å”®å‡ºç‡ï¼ˆé›™è»¸åœ–ï¼‰
3. å„å–è²¨æ–¹å¼ä½¿ç”¨ç‡ï¼ˆåœ“é¤…åœ–ï¼‰
4. å¹³å‡äº¤æ˜“é€±æœŸï¼ˆç™¼å¸ƒåˆ°æˆäº¤å¤©æ•¸ï¼‰

---

### Dashboard 4: ç¤¾å€å¥åº·åº¦å„€è¡¨æ¿

**ç¶­åº¦**: æŒ‰ç¤¾å€æ‹†åˆ†

**KPIå¡ç‰‡**ï¼ˆæ¯ç¤¾å€ï¼‰:
- é©—è­‰ç”¨æˆ¶æ•¸
- æ»²é€ç‡ï¼ˆé©—è­‰ç”¨æˆ¶/ç¸½æˆ¶æ•¸ï¼‰
- æœ¬é€±å•†å“ç™¼å¸ƒæ•¸
- æœ¬æœˆäº¤æ˜“æ•¸

**åœ–è¡¨**:
1. å„ç¤¾å€æ»²é€ç‡æ’è¡Œï¼ˆæ©«æ¢åœ–ï¼‰
2. å„ç¤¾å€æ´»èºåº¦ç†±åŠ›åœ–
3. ç¤¾å€è¦æ¨¡ vs. äº¤æ˜“å¯†åº¦ï¼ˆæ•£é»åœ–ï¼‰

---

## å¯¦ä½œä»£ç¢¼ç¯„ä¾‹

### Flutter + Firebase Analytics æ•´åˆ

#### 1. åˆå§‹åŒ– Firebase Analytics

```dart
// lib/services/analytics_service.dart
import 'package:firebase_analytics/firebase_analytics.dart';

class AnalyticsService {
  static final FirebaseAnalytics _analytics = FirebaseAnalytics.instance;
  static final FirebaseAnalyticsObserver observer =
      FirebaseAnalyticsObserver(analytics: _analytics);

  // è¨­å®šç”¨æˆ¶å±¬æ€§
  static Future<void> setUserProperties({
    required String userId,
    required String communityId,
    required bool isVerified,
    required String signupMethod,
  }) async {
    await _analytics.setUserId(id: userId);
    await _analytics.setUserProperty(
      name: 'user_community',
      value: communityId,
    );
    await _analytics.setUserProperty(
      name: 'user_verified',
      value: isVerified.toString(),
    );
    await _analytics.setUserProperty(
      name: 'user_signup_method',
      value: signupMethod,
    );
  }

  // æ›´æ–°ç”¨æˆ¶è§’è‰²
  static Future<void> updateUserRole(String role) async {
    await _analytics.setUserProperty(
      name: 'user_role',
      value: role,
    );
  }
}
```

---

#### 2. è¿½è¹¤è¨»å†Šäº‹ä»¶

```dart
// å®Œæˆè¨»å†Šæ™‚
Future<void> trackSignUp(String method, String? referralSource) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'sign_up',
    parameters: {
      'method': method, // "google" | "apple" | "line"
      'timestamp': DateTime.now().millisecondsSinceEpoch,
      'referral_source': referralSource ?? 'organic',
    },
  );
}
```

---

#### 3. è¿½è¹¤ç¤¾å€é©—è­‰

```dart
Future<void> trackCommunityVerify({
  required String communityId,
  required String communityName,
  required int daysSinceSignup,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'community_verify',
    parameters: {
      'community_id': communityId,
      'community_name': communityName,
      'verification_method': 'qr_code',
      'days_since_signup': daysSinceSignup,
      'verification_location': 'management_office',
    },
  );
}
```

---

#### 4. è¿½è¹¤å•†å“ç™¼å¸ƒ

```dart
Future<void> trackItemPublishComplete({
  required String itemId,
  required String category,
  required String condition,
  required double price,
  required bool isNegotiable,
  required bool hasUrl,
  String? urlSource,
  required String usageTime,
  required int photoCount,
  required int descriptionLength,
  required int timeToComplete,
  required bool isFirstTime,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'item_publish_complete',
    parameters: {
      'item_id': itemId,
      'category': category,
      'condition': condition,
      'price': price,
      'is_negotiable': isNegotiable,
      'has_url': hasUrl,
      'url_source': urlSource,
      'usage_time': usageTime,
      'photo_count': photoCount,
      'description_length': descriptionLength,
      'time_to_complete': timeToComplete,
      'user_type': isFirstTime ? 'first_time' : 'returning',
    },
  );
}
```

---

#### 5. è¿½è¹¤äº¤æ˜“å®Œæˆ

```dart
Future<void> trackTransactionComplete({
  required String transactionId,
  required String itemId,
  required String sellerId,
  required String buyerId,
  required double finalPrice,
  required double originalPrice,
  required String pickupMethod,
  required int daysToComplete,
  required int commentCount,
  required bool isSameCommunity,
  required String communityId,
}) async {
  final discountAmount = originalPrice - finalPrice;

  await FirebaseAnalytics.instance.logEvent(
    name: 'transaction_complete',
    parameters: {
      'transaction_id': transactionId,
      'item_id': itemId,
      'seller_id': sellerId,
      'buyer_id': buyerId,
      'final_price': finalPrice,
      'original_price': originalPrice,
      'discount_amount': discountAmount,
      'pickup_method': pickupMethod,
      'payment_method': 'cash',
      'days_to_complete': daysToComplete,
      'comment_count': commentCount,
      'is_same_community': isSameCommunity,
      'community_id': communityId,
    },
  );

  // åŒæ™‚è¿½è¹¤ç‚ºGA4 Revenue Event
  await FirebaseAnalytics.instance.logEvent(
    name: 'purchase',
    parameters: {
      'transaction_id': transactionId,
      'value': finalPrice,
      'currency': 'TWD',
      'items': [
        {
          'item_id': itemId,
          'item_name': 'Secondhand Item',
          'item_category': category,
          'price': finalPrice,
          'quantity': 1,
        }
      ],
    },
  );
}
```

---

#### 6. è¿½è¹¤è­°åƒ¹äº‹ä»¶

```dart
Future<void> trackNegotiationStart({
  required String itemId,
  required double originalPrice,
  required double offeredPrice,
}) async {
  final discountPercent = ((originalPrice - offeredPrice) / originalPrice * 100).round();

  await FirebaseAnalytics.instance.logEvent(
    name: 'negotiation_start',
    parameters: {
      'item_id': itemId,
      'original_price': originalPrice,
      'offered_price': offeredPrice,
      'discount_percent': discountPercent,
      'negotiation_method': 'slider',
    },
  );
}

Future<void> trackNegotiationRespond({
  required String itemId,
  required String responseType, // "accept" | "reject" | "counter_offer"
  double? counterPrice,
  required int responseTimeMinutes,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'negotiation_respond',
    parameters: {
      'item_id': itemId,
      'response_type': responseType,
      'counter_price': counterPrice,
      'response_time': responseTimeMinutes,
    },
  );
}
```

---

#### 7. è¿½è¹¤ç®¡ç†å®¤ä»£æ”¶

```dart
Future<void> trackManagementPickupCreate({
  required String itemId,
  required String pickupCode,
  required double estimatedAmount,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'management_pickup_create',
    parameters: {
      'item_id': itemId,
      'pickup_code': pickupCode,
      'estimated_amount': estimatedAmount,
    },
  );
}

Future<void> trackManagementPickupDelivered({
  required String itemId,
  required String pickupCode,
  required String adminId,
  required int deliveryTimeHours,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'management_pickup_delivered',
    parameters: {
      'item_id': itemId,
      'pickup_code': pickupCode,
      'admin_id': adminId,
      'delivery_time': deliveryTimeHours,
    },
  );
}
```

---

#### 8. è¿½è¹¤æ¨æ’­é€šçŸ¥

```dart
Future<void> trackNotificationClick({
  required String notificationType,
  required String itemId,
  required int timeToClickMinutes,
}) async {
  await FirebaseAnalytics.instance.logEvent(
    name: 'notification_click',
    parameters: {
      'notification_type': notificationType,
      'item_id': itemId,
      'time_to_click': timeToClickMinutes,
    },
  );
}
```

---

#### 9. è¿½è¹¤ç•«é¢ç€è¦½

```dart
// åœ¨æ¯å€‹ç•«é¢çš„ initState() ä¸­
@override
void initState() {
  super.initState();
  FirebaseAnalytics.instance.setCurrentScreen(
    screenName: 'ItemDetailScreen',
    screenClassOverride: 'ItemDetailScreen',
  );
}
```

---

## æ•¸æ“šæ²»ç†è¦ç¯„

### éš±ç§åˆè¦

**éµå®ˆè¦ç¯„**:
- âœ… GDPRï¼ˆæ­ç›Ÿä¸€èˆ¬è³‡æ–™ä¿è­·è¦å‰‡ï¼‰
- âœ… PDPAï¼ˆå°ç£å€‹äººè³‡æ–™ä¿è­·æ³•ï¼‰
- âœ… Apple App Store éš±ç§è¦æ±‚
- âœ… Google Play éš±ç§æ”¿ç­–

**ä¸è¿½è¹¤çš„è³‡æ–™**:
- âŒ çœŸå¯¦å§“å
- âŒ é›»è©±è™Ÿç¢¼
- âŒ Emailå®Œæ•´å…§å®¹
- âŒ é–€ç‰Œè™Ÿç¢¼
- âŒ èŠå¤©å…§å®¹å…¨æ–‡

**åŒ¿ååŒ–è™•ç†**:
- user_id ä½¿ç”¨ UUIDï¼ˆä¸åŒ…å«å€‹äººè­˜åˆ¥è³‡è¨Šï¼‰
- community_id ä½¿ç”¨åŠ å¯†IDï¼ˆä¸æš´éœ²ç¤¾å€åç¨±ï¼‰
- å•†å“æè¿°åƒ…è¿½è¹¤ã€Œå­—æ•¸ã€ä¸è¿½è¹¤ã€Œå…§å®¹ã€

---

### è³‡æ–™ä¿å­˜æœŸé™

| è³‡æ–™é¡å‹ | ä¿å­˜æœŸé™ | å‚™è¨» |
|---------|---------|------|
| ç”¨æˆ¶äº‹ä»¶è³‡æ–™ | 14å€‹æœˆ | GA4é è¨­ä¿ç•™æœŸé™ |
| ç”¨æˆ¶å±¬æ€§ | ç”¨æˆ¶åˆªé™¤å¸³è™Ÿå¾Œ30å¤© | éµå®ˆè¢«éºå¿˜æ¬Š |
| è½‰æ›è³‡æ–™ | ç„¡é™æœŸ | ç”¨æ–¼å•†æ¥­åˆ†æï¼ˆåŒ¿ååŒ–ï¼‰ |
| åŸå§‹äº‹ä»¶æ—¥èªŒ | 90å¤© | ç”¨æ–¼é™¤éŒ¯èˆ‡ç•°å¸¸åµæ¸¬ |

---

### æ•¸æ“šå“è³ªæª¢æŸ¥

**æ¯é€±æª¢æŸ¥æ¸…å–®**:
- [ ] æª¢æŸ¥äº‹ä»¶ç™¼é€é‡ï¼ˆæ˜¯å¦æœ‰ç•°å¸¸ä¸‹é™/ä¸Šå‡ï¼‰
- [ ] æª¢æŸ¥é—œéµè½‰æ›ç‡ï¼ˆæ˜¯å¦åœ¨æ­£å¸¸ç¯„åœï¼‰
- [ ] æª¢æŸ¥åƒæ•¸å®Œæ•´æ€§ï¼ˆæ˜¯å¦æœ‰missing valuesï¼‰
- [ ] æª¢æŸ¥ç•°å¸¸å€¼ï¼ˆä¾‹å¦‚ï¼šprice = 0, time_to_complete = 0ï¼‰

**ç›£æ§å‘Šè­¦**:
- æ—¥æ´»ä¸‹é™> 20% â†’ ç™¼é€å‘Šè­¦
- äº¤æ˜“å®Œæˆæ•¸< 3ç­†/æ—¥ â†’ ç™¼é€å‘Šè­¦
- äº‹ä»¶ç™¼é€å¤±æ•—ç‡> 5% â†’ ç™¼é€å‘Šè­¦

---

## é™„éŒ„ï¼šäº‹ä»¶å¿«é€Ÿåƒè€ƒ

### æ ¸å¿ƒäº‹ä»¶æ¸…å–®ï¼ˆæŒ‰å„ªå…ˆç´šï¼‰

| äº‹ä»¶åç¨± | è§¸ç™¼æ™‚æ©Ÿ | è½‰æ› | Tier |
|---------|---------|------|------|
| `sign_up` | å®Œæˆè¨»å†Š | âœ… | 1 |
| `community_verify` | å®Œæˆé©—è­‰ | âœ… | 1 |
| `item_publish_complete` | ç™¼å¸ƒå•†å“ | âœ… | 1 |
| `comment_post` | ç™¼è¡¨ç•™è¨€ | âœ… | 1 |
| `transaction_complete` | å®Œæˆäº¤æ˜“ | âœ… | 1 |
| `rating_submit` | æäº¤è©•åƒ¹ | âœ… | 1 |
| `item_view` | æŸ¥çœ‹å•†å“ | âŒ | 2 |
| `search` | æœå°‹ | âŒ | 2 |
| `negotiation_start` | é–‹å§‹è­°åƒ¹ | âŒ | 2 |
| `pickup_method_select` | é¸æ“‡å–è²¨æ–¹å¼ | âŒ | 2 |
| `notification_click` | é»æ“Šé€šçŸ¥ | âŒ | 2 |
| `item_publish_abandoned` | æ”¾æ£„ç™¼å¸ƒ | âŒ | 3 |
| `photo_upload` | ä¸Šå‚³ç…§ç‰‡ | âŒ | 3 |
| `quick_reply_use` | ä½¿ç”¨å¿«é€Ÿå›è¦† | âŒ | 3 |

---

**Google Analytics è¿½è¹¤è¨ˆåŠƒæ–‡æª”å®Œæˆï¼** ğŸ“Š

---

## ä¸‹ä¸€æ­¥è¡Œå‹•

1. **é–‹ç™¼å‰æº–å‚™**:
   - åœ¨Firebase Consoleå»ºç«‹å°ˆæ¡ˆ
   - åœ¨GA4å»ºç«‹Property
   - é…ç½®iOS/Android App

2. **é–‹ç™¼éšæ®µ**:
   - æ•´åˆFirebase Analytics SDK
   - å¯¦ä½œæ ¸å¿ƒäº‹ä»¶è¿½è¹¤ï¼ˆTier 1ï¼‰
   - æ¸¬è©¦äº‹ä»¶ç™¼é€ï¼ˆä½¿ç”¨Debug Viewï¼‰

3. **ä¸Šç·šå‰**:
   - é©—è­‰æ‰€æœ‰è½‰æ›äº‹ä»¶æ­£å¸¸é‹ä½œ
   - è¨­å®šGA4å„€è¡¨æ¿
   - é…ç½®å‘Šè­¦æ©Ÿåˆ¶

4. **ä¸Šç·šå¾Œ**:
   - æ¯æ—¥ç›£æ§é—œéµæŒ‡æ¨™
   - æ¯é€±reviewæ•¸æ“šå“è³ª
   - æ¯æœˆåˆ†æç”¨æˆ¶è¡Œç‚ºä¸¦å„ªåŒ–ç”¢å“
