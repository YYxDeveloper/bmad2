# 鄰里市集 - 頁面分析報告

**分析來源：** PRD.md (34 個功能需求)
**分析日期：** 2025-11-13
**分析者：** UI Designer

---

## 執行摘要

本文件分析 PRD 中的所有功能需求，識別出應用程式需要的所有頁面，並按照功能模組和優先級進行分類。共識別出 **35 個主要頁面**（包含 Web 後台頁面）。

---

## 頁面分類總覽

### MVP 核心頁面（必須實作）
- **認證與個人資料**：5 個頁面
- **商品管理**：6 個頁面
- **交易流程**：5 個頁面
- **社交與互動**：3 個頁面
- **設定與管理**：4 個頁面
- **系統頁面**：3 個頁面

### Web 後台頁面（管理員）
- **後台管理**：6 個頁面

### Phase 2 頁面（未來擴展）
- **進階功能**：3 個頁面

---

## 1. 認證與個人資料模組

### 1.1 登入/註冊頁（Login/Register Page）
**對應需求：** FR-001
**頁面類型：** 全螢幕頁
**路由：** `/login`, `/register`

**功能：**
- 第三方登入（Google、Apple、LINE）
- 登入狀態持久保存
- 首次登入自動建立帳號

**UI 元素：**
- 品牌 Logo
- 第三方登入按鈕（3 個）
- 隱私政策連結
- 使用條款連結

---

### 1.2 社區驗證頁（Community Verification Page）
**對應需求：** FR-002
**頁面類型：** 標準頁
**路由：** `/verify`

**功能：**
- QR Code 掃描功能
- 門牌號碼確認
- 驗證結果顯示

**UI 元素：**
- QR Code 掃描器
- 門牌號碼顯示（自動帶入）
- 確認按鈕
- 驗證成功/失敗提示

---

### 1.3 個人資料編輯頁（Profile Edit Page）
**對應需求：** FR-003
**頁面類型：** 表單頁
**路由：** `/profile/edit`

**功能：**
- 編輯暱稱（2-20字元，同社區內不可重複）
- 上傳/編輯頭像（拍照或相簿選擇）
- 編輯個人簡介（選填，50字內）
- 顯示系統資訊（信用評分、交易次數、加入日期、已加入的社區列表）

**UI 元素：**
- 頭像上傳區域
- 暱稱輸入框
- 個人簡介輸入框（多行）
- 系統資訊顯示區塊
- 保存按鈕

---

### 1.4 個人主頁（Profile Page）
**對應需求：** FR-014
**頁面類型：** 詳情頁
**路由：** `/profile/:userId`

**功能：**
- 顯示個人資訊（頭像、暱稱、認證徽章、信用評分、交易次數、加入時間、所屬社區）
- 正在出售的商品列表
- 收到的評價列表（最新5筆）

**UI 元素：**
- 個人資訊區塊
- 商品列表（網格或列表）
- 評價列表
- 操作按鈕（編輯、檢舉、封鎖）

---

### 1.5 首次使用引導頁（Onboarding Page）
**對應需求：** FR-031
**頁面類型：** 全螢幕頁
**路由：** `/onboarding`

**功能：**
- 歡迎頁面（介紹平台核心價值）
- 登入引導（說明第三方登入方式）
- 社區驗證引導（說明驗證重要性）
- 功能介紹（首次使用各功能時顯示）

**UI 元素：**
- 引導輪播（3-4 頁）
- 跳過按鈕
- 下一步按鈕
- 完成按鈕

---

## 2. 商品管理模組

### 2.1 首頁/商品列表頁（Home/Product List Page）
**對應需求：** FR-005
**頁面類型：** 列表頁
**路由：** `/home`

**功能：**
- 顯示主要社區的最新商品（依發布時間倒序）
- 下拉重新整理
- 滾動載入更多（分頁載入）
- 商品卡顯示（主圖、標題、價格、發布時間、留言數、狀態標籤）

**UI 元素：**
- 頂部搜尋欄（可選）
- 商品卡片列表
- 下拉刷新指示器
- 載入更多指示器
- 空狀態提示

---

### 2.2 商品詳情頁（Product Detail Page）
**對應需求：** FR-006
**頁面類型：** 詳情頁
**路由：** `/product/:productId`

**功能：**
- 照片輪播（4張照片，支援左右滑動、點擊放大）
- 商品資訊（標題、價格、狀態、使用時間、摘要、分類）
- 商品網址連結（可點擊開啟外部瀏覽器）
- 賣家資訊區塊
- 留言區（顯示所有留言）
- 操作按鈕（留言、議價、購買）

**UI 元素：**
- 圖片輪播器
- 商品資訊卡片
- 賣家資訊卡片
- 留言列表
- 固定底部操作欄（留言、議價、購買）

---

### 2.3 商品發布頁（Product Publish Page）
**對應需求：** FR-004
**頁面類型：** 表單頁
**路由：** `/publish`

**功能：**
- 上傳商品照片（必須 4 張，支援拍照或相簿選擇）
- 選擇商品狀態（全新/二手）
- 輸入商品網址（選填，自動抓取標題）
- 輸入商品標題（3-50字，必填）
- 輸入商品摘要（20-200字，必填）
- 選擇使用時間（時間區間選擇器）
- 設定價格（固定價格/可議價/免費贈送）
- 選擇發布社區（預設主要社區）

**UI 元素：**
- 照片上傳區域（4 個位置）
- 表單輸入欄位
- 價格設定選項
- 發布按鈕

---

### 2.4 我的商品列表頁（My Products Page）
**對應需求：** FR-007
**頁面類型：** 列表頁
**路由：** `/my-products`

**功能：**
- 查看商品列表（分類：上架中、已預訂、已售出、已下架）
- 編輯商品
- 標記為已預訂/已售出
- 下架/重新上架商品
- 刪除商品

**UI 元素：**
- 分類標籤（上架中、已預訂、已售出、已下架）
- 商品卡片列表
- 操作選單（編輯、下架、刪除）

---

### 2.5 商品編輯頁（Product Edit Page）
**對應需求：** FR-007
**頁面類型：** 表單頁
**路由：** `/product/:productId/edit`

**功能：**
- 修改商品資訊（標題、價格、描述、照片）
- 更新商品狀態

**UI 元素：**
- 與發布頁相同的表單結構
- 保存按鈕

---

### 2.6 分類瀏覽頁（Category Browse Page）
**對應需求：** FR-008
**頁面類型：** 列表頁
**路由：** `/categories/:categoryId`

**功能：**
- 顯示該分類的商品列表
- 分類計數顯示
- 保持在當前社區範圍內

**UI 元素：**
- 分類標題
- 商品數量顯示
- 商品列表

---

### 2.7 搜尋結果頁（Search Results Page）
**對應需求：** FR-009
**頁面類型：** 列表頁
**路由：** `/search?q=:keyword`

**功能：**
- 顯示搜尋結果（商品標題、描述）
- 搜尋歷史紀錄（最近5筆）
- 熱門搜尋關鍵字
- 無結果提示

**UI 元素：**
- 搜尋框（顯示當前關鍵字）
- 搜尋歷史列表
- 熱門搜尋標籤
- 搜尋結果列表
- 清除搜尋歷史按鈕

---

## 3. 交易流程模組

### 3.1 交易確認頁（Transaction Confirm Page）
**對應需求：** FR-012
**頁面類型：** 標準頁
**路由：** `/transaction/confirm`

**功能：**
- 選擇成交買家（從留言者中選擇或手動輸入）
- 選擇交易模式（管理室代收、大廳面交、門口面交）
- 確認交易資訊

**UI 元素：**
- 買家選擇列表
- 交易模式選擇卡片
- 確認按鈕

---

### 3.2 管理室代收頁（Management Office Pickup Page）
**對應需求：** FR-020
**頁面類型：** 標準頁
**路由：** `/transaction/pickup/:transactionId`

**功能（賣家端）：**
- 顯示代收編號（6位數字）
- 顯示 QR Code
- 標記「我已送達管理室」
- 等待買家取貨狀態

**功能（買家端）：**
- 顯示代收編號
- 顯示商品資訊
- 標記「我已取貨」

**UI 元素：**
- 代收編號顯示（大字體）
- QR Code 顯示
- 商品資訊卡片
- 狀態指示器
- 操作按鈕

---

### 3.3 面交約定頁（Meetup Arrange Page）
**對應需求：** FR-020
**頁面類型：** 表單頁
**路由：** `/transaction/meetup/:transactionId`

**功能：**
- 選擇面交地點（大廳、中庭、郵件室、其他）
- 選擇面交日期和時間
- 安全提示顯示
- 確認約定

**UI 元素：**
- 地點選擇卡片
- 日期選擇器
- 時間選擇器
- 安全提示區塊
- 確認按鈕

---

### 3.4 交易完成頁（Transaction Complete Page）
**對應需求：** FR-012, FR-013
**頁面類型：** 標準頁
**路由：** `/transaction/complete/:transactionId`

**功能：**
- 顯示交易完成確認
- 提示進行評價
- 跳轉到評價頁面

**UI 元素：**
- 成功圖示
- 交易資訊顯示
- 立即評價按鈕
- 稍後評價按鈕

---

### 3.5 評價頁（Review Page）
**對應需求：** FR-013
**頁面類型：** 標準頁
**路由：** `/review/:transactionId`

**功能：**
- 選擇星等評分（1-5星）
- 填寫文字評價（選填，最多100字）
- 送出評價

**UI 元素：**
- 星等評分選擇器
- 文字評價輸入框
- 送出按鈕

---

### 3.6 交易紀錄頁（Transaction History Page）
**對應需求：** FR-017
**頁面類型：** 列表頁
**路由：** `/transactions`

**功能：**
- 查看交易列表（我買到的、我賣出的）
- 每筆交易顯示（商品圖片、標題、交易對象、交易日期、交易金額、評價狀態）
- 搜尋交易紀錄
- 補評價功能（7天內）

**UI 元素：**
- 分類標籤（我買到的、我賣出的）
- 交易卡片列表
- 搜尋框
- 評價狀態標籤

---

## 4. 社交與互動模組

### 4.1 留言板頁（Comment Board Page）
**對應需求：** FR-010
**頁面類型：** 詳情頁的一部分（商品詳情頁的留言區）
**路由：** 內嵌在 `/product/:productId`

**功能：**
- 顯示所有留言（公開+隱私）
- 發表留言（公開/隱私選擇）
- 使用快速留言範本
- 一鍵議價功能
- 賣家回覆留言

**UI 元素：**
- 留言列表
- 留言輸入框
- 公開/隱私切換
- 快速留言範本按鈕
- 議價按鈕

---

### 4.2 通知中心頁（Notification Center Page）
**對應需求：** FR-011
**頁面類型：** 列表頁
**路由：** `/notifications`

**功能：**
- 顯示通知列表（依時間倒序）
- 通知類型圖示
- 留言者頭像、暱稱
- 留言內容摘要
- 商品縮圖與標題
- 未讀標記
- 點擊跳轉到對應商品頁面的留言位置
- 批次清除已讀通知

**UI 元素：**
- 通知列表
- 未讀標記（紅點）
- 通知類型圖示
- 清除已讀按鈕

---

### 4.3 議價對話頁（Negotiation Page）
**對應需求：** FR-010
**頁面類型：** 模態框或標準頁
**路由：** `/negotiate/:productId`

**功能：**
- 顯示商品原價
- 滑桿或數字輸入框設定期望價格
- 自動計算折扣百分比
- 選擇「立即議價」或「先詢問」
- 賣家快速回覆（接受/拒絕/再議）

**UI 元素：**
- 商品資訊顯示
- 價格滑桿
- 折扣百分比顯示
- 議價按鈕
- 賣家回覆選項

---

## 5. 設定與管理模組

### 5.1 設定頁（Settings Page）
**對應需求：** FR-016, FR-025, FR-026
**頁面類型：** 列表頁
**路由：** `/settings`

**功能：**
- 通知設定（開關特定類型通知、夜間靜音模式）
- 隱私設定（門牌號碼顯示規則、個人資料保護）
- 封鎖名單管理
- 個資法權利（資料查詢、下載、更正、刪除）
- 關於我們
- 隱私政策
- 登出

**UI 元素：**
- 設定項目列表
- 開關切換器
- 導航連結

---

### 5.2 封鎖名單頁（Blocked Users Page）
**對應需求：** FR-016
**頁面類型：** 列表頁
**路由：** `/settings/blocked`

**功能：**
- 顯示封鎖的使用者列表
- 解除封鎖功能

**UI 元素：**
- 封鎖使用者列表
- 解除封鎖按鈕

---

### 5.3 隱私設定頁（Privacy Settings Page）
**對應需求：** FR-024, FR-025, FR-026
**頁面類型：** 表單頁
**路由：** `/settings/privacy`

**功能：**
- 門牌號碼顯示設定
- 個人資料保護設定
- 個資法權利行使（資料查詢、下載、更正、刪除）

**UI 元素：**
- 設定選項
- 資料下載按鈕
- 帳號刪除按鈕

---

### 5.4 檢舉頁（Report Page）
**對應需求：** FR-015
**頁面類型：** 模態框或標準頁
**路由：** `/report`

**功能：**
- 選擇檢舉原因（販售違禁品、詐騙行為、不實商品描述、騷擾或不當言論、其他）
- 上傳截圖證據（選填）
- 選擇是否封鎖該使用者
- 提交檢舉

**UI 元素：**
- 檢舉原因選項
- 截圖上傳區域
- 封鎖選項
- 提交按鈕

---

### 5.5 爭議處理頁（Dispute Page）
**對應需求：** FR-022, FR-023
**頁面類型：** 表單頁
**路由：** `/dispute/:transactionId`

**功能：**
- 選擇爭議類型（商品描述不符、商品損壞或缺失、商品功能異常、支付糾紛、其他）
- 上傳證據照片（最多5張）
- 填寫爭議說明（50-500字）
- 提交爭議
- 查看爭議處理進度

**UI 元素：**
- 爭議類型選擇
- 證據上傳區域
- 爭議說明輸入框
- 提交按鈕
- 處理進度顯示

---

## 6. 系統頁面

### 6.1 錯誤頁（Error Page）
**對應需求：** FR-032
**頁面類型：** 標準頁
**路由：** `/error`

**功能：**
- 顯示友善的錯誤訊息
- 提供解決方法
- 重試按鈕

**UI 元素：**
- 錯誤圖示
- 錯誤訊息
- 解決方法提示
- 重試按鈕

---

### 6.2 載入頁（Loading Page）
**對應需求：** FR-033
**頁面類型：** 全螢幕頁
**路由：** 內嵌在各頁面

**功能：**
- 顯示載入動畫
- 顯示載入狀態文字

**UI 元素：**
- 載入動畫（旋轉或骨架屏）
- 載入文字

---

### 6.3 空狀態頁（Empty State Page）
**對應需求：** 多個功能需求
**頁面類型：** 內嵌在各列表頁

**功能：**
- 顯示空狀態圖示和訊息
- 提供操作建議

**UI 元素：**
- 空狀態圖示
- 空狀態標題
- 空狀態描述
- 操作按鈕（如「發布商品」）

---

## 7. Web 後台管理頁面

### 7.1 管理員登入頁（Admin Login Page）
**對應需求：** FR-019
**頁面類型：** Web 頁面
**路由：** `/admin/login`

**功能：**
- Email + 密碼登入
- 登入狀態持久保存

**UI 元素：**
- 登入表單
- 忘記密碼連結

---

### 7.2 後台首頁/儀表板（Admin Dashboard）
**對應需求：** FR-019, FR-030
**頁面類型：** Web 頁面
**路由：** `/admin/dashboard`

**功能：**
- 數據統計面板（社區總住戶數、已驗證住戶數、活躍使用者數、商品數量、交易次數）
- 圖表顯示（驗證趨勢、活躍度）
- 異常交易警示列表

**UI 元素：**
- 統計卡片
- 圖表（Chart.js 或類似）
- 警示列表

---

### 7.3 社區管理頁（Community Management Page）
**對應需求：** FR-019
**頁面類型：** Web 頁面
**路由：** `/admin/communities`

**功能：**
- 新增/編輯社區資訊（社區名稱、地址、建築數量）
- 建立建築結構（A棟、B棟、C棟）
- 設定樓層和門牌號碼
- 批次匯入門牌資料（CSV上傳）
- 門牌狀態管理（已驗證/未驗證/已出租/空屋）

**UI 元素：**
- 社區列表
- 社區編輯表單
- 門牌管理表格
- CSV 匯入按鈕

---

### 7.4 QR Code 產生器頁（QR Code Generator Page）
**對應需求：** FR-019, FR-029
**頁面類型：** Web 頁面
**路由：** `/admin/qrcode`

**功能：**
- 選擇社區和門牌
- 產生 QR Code（包含社區 ID、門牌號碼、一次性驗證 Token）
- 顯示 QR Code（可全螢幕放大）
- 顯示有效期限倒數計時（5分鐘）
- 下載或列印 QR Code
- 批量產生 QR Code

**UI 元素：**
- 社區和門牌選擇器
- QR Code 顯示區域
- 倒數計時器
- 下載/列印按鈕

---

### 7.5 代收商品管理頁（Pickup Management Page）
**對應需求：** FR-019, FR-020
**頁面類型：** Web 頁面
**路由：** `/admin/pickups`

**功能：**
- 顯示待處理代收清單（代收編號、賣家、買家、商品名稱、金額、狀態）
- 登記「已收到商品」（掃描或輸入代收編號，確認商品與賣家身份，拍照留存選填）
- 登記「已取貨」（確認買家身份，商品交給買家，收取現金，標記「已取貨」）
- 管理現金（記錄收到的現金金額，待賣家領取現金清單，現金交付記錄）

**UI 元素：**
- 代收清單表格
- 狀態篩選器
- 代收編號輸入/掃描
- 現金管理區塊

---

### 7.6 權限管理頁（Permission Management Page）
**對應需求：** FR-027
**頁面類型：** Web 頁面
**路由：** `/admin/permissions`

**功能：**
- 建立/管理管理員帳號
- 設定權限層級（超級管理員、社區管理員、管理室操作員）
- 查看權限設定

**UI 元素：**
- 管理員列表
- 權限設定表單
- 權限層級說明

---

### 7.7 操作日誌頁（Operation Logs Page）
**對應需求：** FR-028
**頁面類型：** Web 頁面
**路由：** `/admin/logs`

**功能：**
- 顯示操作記錄（操作時間、操作者、操作類型、操作對象、IP 位址、操作結果）
- 依時間、操作類型、操作者篩選
- 日誌保留90天

**UI 元素：**
- 操作日誌表格
- 篩選器
- 搜尋框

---

## 8. Phase 2 擴展頁面

### 8.1 批量上架頁（Batch Publish Page）
**對應需求：** Phase 2 功能
**頁面類型：** 表單頁
**路由：** `/publish/batch`

**功能：**
- 一次選擇多個商品照片（10-20件）
- 快速複製上一個商品的資訊作為範本
- 批次設定共同屬性
- 批次價格設定
- 預覽待上架清單
- 一次發布

**UI 元素：**
- 多照片選擇區域
- 批次設定表單
- 預覽列表
- 發布按鈕

---

### 8.2 社區公告頁（Community Announcements Page）
**對應需求：** Phase 2 功能
**頁面類型：** 列表頁
**路由：** `/announcements`

**功能：**
- 顯示社區公告列表
- 社區活動通知
- 失物招領專區
- 需求牆

**UI 元素：**
- 公告列表
- 分類標籤
- 發布公告按鈕（管理員）

---

### 8.3 以物易物頁（Barter Page）
**對應需求：** Phase 2 功能
**頁面類型：** 表單頁/詳情頁
**路由：** `/barter/:productId`

**功能：**
- 選擇「交換」模式
- 填寫想交換的物品類型
- 提議交換方案
- 接受/拒絕/提出反提議

**UI 元素：**
- 交換模式選擇
- 交換物品描述
- 交換提議列表
- 操作按鈕

---

## 頁面優先級分類

### P0 - MVP 必須（26 個頁面）
1. 登入/註冊頁
2. 社區驗證頁
3. 個人資料編輯頁
4. 個人主頁
5. 首次使用引導頁
6. 首頁/商品列表頁
7. 商品詳情頁
8. 商品發布頁
9. 我的商品列表頁
10. 商品編輯頁
11. 分類瀏覽頁
12. 搜尋結果頁
13. 交易確認頁
14. 管理室代收頁
15. 面交約定頁
16. 交易完成頁
17. 評價頁
18. 交易紀錄頁
19. 留言板頁（內嵌）
20. 通知中心頁
21. 議價對話頁
22. 設定頁
23. 封鎖名單頁
24. 隱私設定頁
25. 檢舉頁
26. 爭議處理頁

### P1 - Web 後台必須（7 個頁面）
1. 管理員登入頁
2. 後台首頁/儀表板
3. 社區管理頁
4. QR Code 產生器頁
5. 代收商品管理頁
6. 權限管理頁
7. 操作日誌頁

### P2 - Phase 2 擴展（3 個頁面）
1. 批量上架頁
2. 社區公告頁
3. 以物易物頁

---

## 頁面路由結構

### 主要路由
```
/                          → 首頁/商品列表
/login                     → 登入/註冊
/verify                    → 社區驗證
/onboarding                → 首次使用引導

/product/:id               → 商品詳情
/product/:id/edit          → 商品編輯
/publish                   → 發布商品

/my-products               → 我的商品
/categories/:id            → 分類瀏覽
/search                    → 搜尋結果

/transaction/confirm       → 交易確認
/transaction/pickup/:id    → 管理室代收
/transaction/meetup/:id    → 面交約定
/transaction/complete/:id  → 交易完成
/transactions              → 交易紀錄

/review/:id                → 評價
/negotiate/:id             → 議價

/profile/:id               → 個人主頁
/profile/edit              → 個人資料編輯

/notifications             → 通知中心

/settings                  → 設定
/settings/blocked          → 封鎖名單
/settings/privacy          → 隱私設定

/report                    → 檢舉
/dispute/:id               → 爭議處理
```

### Web 後台路由
```
/admin/login               → 管理員登入
/admin/dashboard           → 後台首頁
/admin/communities         → 社區管理
/admin/qrcode              → QR Code 產生器
/admin/pickups             → 代收商品管理
/admin/permissions          → 權限管理
/admin/logs                → 操作日誌
```

---

## 頁面實作建議

### 1. 頁面模板建立順序
1. **基礎模板**：標準頁、列表頁、詳情頁、表單頁、全螢幕頁
2. **認證流程**：登入、驗證、引導
3. **核心功能**：商品列表、商品詳情、商品發布
4. **交易流程**：交易確認、代收、面交、評價
5. **社交功能**：留言、通知、議價
6. **設定功能**：設定、隱私、檢舉
7. **後台管理**：所有後台頁面

### 2. 共用組件優先建立
- 頂部導航欄（AppBar）
- 底部導航欄（BottomNavigationBar）
- 商品卡片（ProductCard）
- 留言卡片（CommentCard）
- 通知卡片（NotificationCard）
- 表單輸入組件（InputField、TextArea）
- 按鈕組件（PrimaryButton、SecondaryButton）

### 3. 狀態管理建議
- 使用 Riverpod 管理頁面狀態
- 建立頁面級別的 Provider
- 建立全域狀態 Provider（如使用者資訊、通知數量）

---

## 總結

本分析識別出 **36 個主要頁面**（26 個 MVP 頁面 + 7 個後台頁面 + 3 個 Phase 2 頁面），涵蓋了 PRD 中所有 34 個功能需求。

**下一步行動：**
1. 建立頁面模板和基礎組件
2. 按照優先級順序實作頁面
3. 建立頁面路由配置
4. 實作頁面轉場動畫
5. 進行頁面測試和優化

---

_本文件為頁面分析報告，供開發團隊參考。頁面設計會根據實際開發情況持續優化。_

